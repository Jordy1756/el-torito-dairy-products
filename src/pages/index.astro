---
import Footer from "@components/layout/Footer.astro";
import Header from "@components/layout/Header.astro";
import Hero from "@components/sections/hero/Hero.astro";
import ContactUs from "@components/sections/contact-us/ContactUs.astro";
import FAQ from "@components/sections/faq/FAQ.astro";
import Products from "@components/sections/products/Products.astro";
import Toast from "@components/ui/Toast.astro";
import Layout from "@layouts/Layout.astro";

import { basics } from "@data";

const { name } = basics;

const bannerImages = [
  "https://res.cloudinary.com/dygwpgeq9/image/upload/v1745387808/banner_img_01_xp3kl6.webp",
  "https://res.cloudinary.com/dygwpgeq9/image/upload/v1745387808/banner_img_02_bnjs84.webp",
  "https://res.cloudinary.com/dygwpgeq9/image/upload/v1745387808/banner_img_03_ic4ksm.webp",
  "https://res.cloudinary.com/dygwpgeq9/image/upload/v1745387808/banner_img_04_rim6to.webp",
];
---

<Layout title={name}>
  <Fragment slot="head">
    {
      bannerImages.map((imageUrl, index) => (
        <link rel="preload" as="image" href={imageUrl} fetchpriority={index === 0 ? "high" : "low"} />
      ))
    }
  </Fragment>
  <Header hasHero />
  <main>
    <Hero />
    <Products />
    <FAQ />
    <ContactUs />
  </main>
  <Footer />
  <Toast />
</Layout>

<style>
  main {
    align-self: center;
    display: flex;
    flex-direction: column;
    gap: 4.5rem;
    padding-bottom: 4.5rem;
  }
</style>

<style is:global>
  main > section:not(:first-child) {
    margin: auto;
    width: min(100%, calc(var(--max-width) + 2rem));
  }
</style>

<script>
  import { createHeroObserver } from "@scripts/utils/observers";

  const hero = document.querySelector("#hero") as HTMLElement;
  const header = document.querySelector("#header") as HTMLElement;

  createHeroObserver(header).observe(hero);
</script>
